{"remainingRequest":"F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\src\\views\\userInfo\\userInfo.vue?vue&type=style&index=0&id=e05df1b6&scoped=true&lang=css&","dependencies":[{"path":"F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\src\\views\\userInfo\\userInfo.vue","mtime":1617013599767},{"path":"F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\node_modules\\css-loader\\dist\\cjs.js","mtime":1614934889000},{"path":"F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1614934889000},{"path":"F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVsLWljb24tcy1ob21lewogIGZvbnQtc2l6ZTogMjAwJTsKfQouZWwtYnJlYWRjcnVtYjF7CiAgZm9udC1zaXplOiAxNXB4OwogIG1hcmdpbi10b3A6IDEwcHg7Cn0KLmVsLXJvdzF7CiAgbWFyZ2luLXRvcDogMzBweDsKICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAuMTIpLCAwIDAgNnB4IHJnYmEoMCwgMCwgMCwgLjA0KTsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGhlaWdodDogNTBweDsKICBsaW5lLWhlaWdodDogNTBweDsKICBmb250LXdlaWdodDogYm9sZDsKICBmb250LWZhbWlseTog6buR5L2TOwogIGZvbnQtc2l6ZTogMjVweDsKfQouZWwtY2FyZHsKICBtYXJnaW4tdG9wOiAzMHB4OwogIGJvcmRlci1yYWRpdXM6IDhweDsKfQo="},{"version":3,"sources":["userInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"userInfo.vue","sourceRoot":"src/views/userInfo","sourcesContent":["<template>\n<div>\n  <el-breadcrumb separator=\"/\">\n    <el-breadcrumb-item to=\"/Main\"><i class=\"el-icon-s-home\"></i></el-breadcrumb-item>\n    <el-breadcrumb-item class=\"el-breadcrumb1\">个人信息</el-breadcrumb-item>\n    <el-breadcrumb-item class=\"el-breadcrumb1\">基本资料</el-breadcrumb-item>\n  </el-breadcrumb>\n\n  <el-row class=\"el-row1\">\n    <el-col :span=\"24\"><div class=\"grid-content\">基本资料</div></el-col>\n  </el-row>\n\n  <el-row  class=\"el-row2\" type=\"flex\" justify=\"space-around\">\n    <el-col :span=\"8\">\n      <el-card class=\"el-card\">\n        <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n          <el-form-item label=\"姓名\">\n            <el-input v-model=\"form.name\" :disabled=\"true\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"手机\">\n            <el-input v-model=\"form.phone\" type=\"number\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"工号\">\n            <el-input v-model=\"form.id\" type=\"number\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"邮箱\">\n            <el-input v-model=\"form.email\" type=\"email\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"部门\">\n            <el-input v-model=\"form.department\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"权限\">\n            <el-input v-model=\"form.perm\" :disabled=\"true\"></el-input>\n          </el-form-item>\n          <el-button type=\"primary\" @click=\"update\" style=\"margin-left: 45%\">保存</el-button>\n        </el-form>\n      </el-card>\n    </el-col>\n    <el-col :span=\"8\">\n      <el-card>\n        <el-form ref=\"form1\" :rules=\"rules\" :model=\"form1\">\n          <el-form-item label=\"原密码\" prop=\"password\">\n            <el-input type=\"password\" v-model=\"form1.password\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"新密码\" prop=\"newpassword\">\n            <el-input type=\"password\" v-model=\"form1.newpassword\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"确认密码\" prop=\"conpassword\">\n            <el-input type=\"password\" v-model=\"form1.conpassword\"></el-input>\n          </el-form-item>\n          <el-button type=\"primary\" @click=\"edit\" style=\"margin-left: 30%\">确认修改</el-button>\n          <el-button @click=\"reset('form1')\">清空</el-button>\n        </el-form>\n      </el-card>\n    </el-col>\n  </el-row>\n\n</div>\n</template>\n\n<script>\nimport {default as api} from \"@/utils/api\";\n\nexport default {\n  name: \"userInfo\",\n  data() {\n    let validateChange = (rule,value,callback)=>{\n      if(value!==''){\n        if(value===this.form1.password){\n          callback(new Error('新密码不能与原密码一致'))\n          return false\n        }\n        else {\n          callback()\n        }\n      }\n    }\n    let validatePassword = (rule,value,callback)=>{\n      if(value!==''){\n        if(value!==this.form1.newpassword){\n          callback(new Error('两次输入密码不一致'))\n          return false\n        }\n        else {\n          callback()\n        }\n      }\n    }\n    return{\n      form: {\n        name: '',\n        sex: '',\n        phone: '',\n        id: '',\n        email: '',\n        department: '',\n        account: ''\n      },\n      form1:{\n        password:'',\n        newpassword:'',\n        conpassword:''\n      },\n      rules: {\n        newpassword: [\n          {\n            required: true,\n            message: '密码不能为空',\n            trigger: 'blur'\n          },\n          {\n            min: 6,\n            max: 20,\n            message: '长度在 6 个字符以上',\n            trigger: 'blur'\n          },\n          {\n            validator: validateChange,\n            trigger: 'blur'\n          }\n        ],\n        conpassword: [\n          {\n            required: true,\n            message: '请输入确认密码',\n            trigger: 'blur'\n          },\n          {\n            min: 6,\n            max: 20,\n            message: '长度在 6 个字符以上',\n            trigger: 'blur'\n          },\n          {\n            validator: validatePassword,\n            trigger: 'blur'\n          }\n        ]\n      }\n    }\n  },\n  created() {\n    this.getUserInfo()\n  },\n  methods:{\n    getUserInfo(){\n\n    },\n    update(){\n      var _this = this;\n      api({\n        url: \"/user/userUpdate\",\n        method: \"post\",\n        data:{\n          username:this.$store.getters.getUser.name,\n          phone:_this.form.phone\n        }\n      }).then(data => {\n            if(data.data.datas==='用户名不存在或者密码错误！'){\n              this.$message({\n                type:\"error\",\n                message:'错误！'\n              })\n            }else {\n              console.log(data);\n              this.$message({\n                type: 'success',\n                message: '信息修改成功'\n              });\n              // location.reload();\n            }\n    }).catch(err => {\n        console.log(err);\n      })\n    },\n\n    edit () {\n      this.$confirm('是否确定修改密码?', '提示', {\n        confirmButtonText: '确定修改',\n        cancelButtonText: '放弃修改',\n        type: 'warning'\n      }).then(() => {\n\n        var _this = this;\n        api({\n          url: \"/user/userChangePassword\",\n          method: \"post\",\n          data:{\n            username:this.$store.getters.getUser.name,\n            originalPassword:_this.form1.password,\n            password: _this.form1.newpassword\n          }\n        }).then(data => {\n          if(data.data.datas==='用户名不存在或者密码错误！'){\n            this.$message({\n              type:\"error\",\n              message:'原密码错误！'\n            })\n          }else {\n            console.log(data);\n            this.$message({\n              type: 'success',\n              message: '密码修改成功'\n            });\n            // location.reload();\n          }\n        }).catch(err => {\n          console.log(err);\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已放弃修改'\n        });\n      })\n\n    },\n    reset(formName){\n      this.$refs[formName].resetFields();\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-icon-s-home{\n  font-size: 200%;\n}\n.el-breadcrumb1{\n  font-size: 15px;\n  margin-top: 10px;\n}\n.el-row1{\n  margin-top: 30px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);\n  border-radius: 4px;\n  text-align: center;\n  height: 50px;\n  line-height: 50px;\n  font-weight: bold;\n  font-family: 黑体;\n  font-size: 25px;\n}\n.el-card{\n  margin-top: 30px;\n  border-radius: 8px;\n}\n</style>\n"]}]}