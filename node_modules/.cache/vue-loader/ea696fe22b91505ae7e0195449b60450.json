{"remainingRequest":"F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\src\\views\\userInfo\\userInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\src\\views\\userInfo\\userInfo.vue","mtime":1617013599767},{"path":"F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1614934889000},{"path":"F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\node_modules\\babel-loader\\lib\\index.js","mtime":1614934889000},{"path":"F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1614934889000},{"path":"F:\\文档\\丹阳不良债权项目\\丹阳债权清收系统\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7ZGVmYXVsdCBhcyBhcGl9IGZyb20gIkAvdXRpbHMvYXBpIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAidXNlckluZm8iLAogIGRhdGEoKSB7CiAgICBsZXQgdmFsaWRhdGVDaGFuZ2UgPSAocnVsZSx2YWx1ZSxjYWxsYmFjayk9PnsKICAgICAgaWYodmFsdWUhPT0nJyl7CiAgICAgICAgaWYodmFsdWU9PT10aGlzLmZvcm0xLnBhc3N3b3JkKXsKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5paw5a+G56CB5LiN6IO95LiO5Y6f5a+G56CB5LiA6Ie0JykpCiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBjYWxsYmFjaygpCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBsZXQgdmFsaWRhdGVQYXNzd29yZCA9IChydWxlLHZhbHVlLGNhbGxiYWNrKT0+ewogICAgICBpZih2YWx1ZSE9PScnKXsKICAgICAgICBpZih2YWx1ZSE9PXRoaXMuZm9ybTEubmV3cGFzc3dvcmQpewogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfkuKTmrKHovpPlhaXlr4bnoIHkuI3kuIDoh7QnKSkKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIGNhbGxiYWNrKCkKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybnsKICAgICAgZm9ybTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHNleDogJycsCiAgICAgICAgcGhvbmU6ICcnLAogICAgICAgIGlkOiAnJywKICAgICAgICBlbWFpbDogJycsCiAgICAgICAgZGVwYXJ0bWVudDogJycsCiAgICAgICAgYWNjb3VudDogJycKICAgICAgfSwKICAgICAgZm9ybTE6ewogICAgICAgIHBhc3N3b3JkOicnLAogICAgICAgIG5ld3Bhc3N3b3JkOicnLAogICAgICAgIGNvbnBhc3N3b3JkOicnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmV3cGFzc3dvcmQ6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICflr4bnoIHkuI3og73kuLrnqbonLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG1pbjogNiwKICAgICAgICAgICAgbWF4OiAyMCwKICAgICAgICAgICAgbWVzc2FnZTogJ+mVv+W6puWcqCA2IOS4quWtl+espuS7peS4iicsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZUNoYW5nZSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBjb25wYXNzd29yZDogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeehruiupOWvhueggScsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbWluOiA2LAogICAgICAgICAgICBtYXg6IDIwLAogICAgICAgICAgICBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDYg5Liq5a2X56ym5Lul5LiKJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzc3dvcmQsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0VXNlckluZm8oKQogIH0sCiAgbWV0aG9kczp7CiAgICBnZXRVc2VySW5mbygpewoKICAgIH0sCiAgICB1cGRhdGUoKXsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgYXBpKHsKICAgICAgICB1cmw6ICIvdXNlci91c2VyVXBkYXRlIiwKICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICBkYXRhOnsKICAgICAgICAgIHVzZXJuYW1lOnRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXNlci5uYW1lLAogICAgICAgICAgcGhvbmU6X3RoaXMuZm9ybS5waG9uZQogICAgICAgIH0KICAgICAgfSkudGhlbihkYXRhID0+IHsKICAgICAgICAgICAgaWYoZGF0YS5kYXRhLmRhdGFzPT09J+eUqOaIt+WQjeS4jeWtmOWcqOaIluiAheWvhueggemUmeivr++8gScpewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZToiZXJyb3IiLAogICAgICAgICAgICAgICAgbWVzc2FnZTon6ZSZ6K+v77yBJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfkv6Hmga/kv67mlLnmiJDlip8nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8gbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgIH0KICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSkKICAgIH0sCgogICAgZWRpdCAoKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruWumuS/ruaUueWvhueggT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6a5L+u5pS5JywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5pS+5byD5L+u5pS5JywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CgogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgYXBpKHsKICAgICAgICAgIHVybDogIi91c2VyL3VzZXJDaGFuZ2VQYXNzd29yZCIsCiAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgIGRhdGE6ewogICAgICAgICAgICB1c2VybmFtZTp0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFVzZXIubmFtZSwKICAgICAgICAgICAgb3JpZ2luYWxQYXNzd29yZDpfdGhpcy5mb3JtMS5wYXNzd29yZCwKICAgICAgICAgICAgcGFzc3dvcmQ6IF90aGlzLmZvcm0xLm5ld3Bhc3N3b3JkCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihkYXRhID0+IHsKICAgICAgICAgIGlmKGRhdGEuZGF0YS5kYXRhcz09PSfnlKjmiLflkI3kuI3lrZjlnKjmiJbogIXlr4bnoIHplJnor6/vvIEnKXsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZToiZXJyb3IiLAogICAgICAgICAgICAgIG1lc3NhZ2U6J+WOn+WvhueggemUmeivr++8gScKICAgICAgICAgICAgfSkKICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn5a+G56CB5L+u5pS55oiQ5YqfJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8gbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSkKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+W3suaUvuW8g+S/ruaUuScKICAgICAgICB9KTsKICAgICAgfSkKCiAgICB9LAogICAgcmVzZXQoZm9ybU5hbWUpewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgfQogIH0KfQo="},{"version":3,"sources":["userInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"userInfo.vue","sourceRoot":"src/views/userInfo","sourcesContent":["<template>\n<div>\n  <el-breadcrumb separator=\"/\">\n    <el-breadcrumb-item to=\"/Main\"><i class=\"el-icon-s-home\"></i></el-breadcrumb-item>\n    <el-breadcrumb-item class=\"el-breadcrumb1\">个人信息</el-breadcrumb-item>\n    <el-breadcrumb-item class=\"el-breadcrumb1\">基本资料</el-breadcrumb-item>\n  </el-breadcrumb>\n\n  <el-row class=\"el-row1\">\n    <el-col :span=\"24\"><div class=\"grid-content\">基本资料</div></el-col>\n  </el-row>\n\n  <el-row  class=\"el-row2\" type=\"flex\" justify=\"space-around\">\n    <el-col :span=\"8\">\n      <el-card class=\"el-card\">\n        <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n          <el-form-item label=\"姓名\">\n            <el-input v-model=\"form.name\" :disabled=\"true\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"手机\">\n            <el-input v-model=\"form.phone\" type=\"number\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"工号\">\n            <el-input v-model=\"form.id\" type=\"number\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"邮箱\">\n            <el-input v-model=\"form.email\" type=\"email\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"部门\">\n            <el-input v-model=\"form.department\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"权限\">\n            <el-input v-model=\"form.perm\" :disabled=\"true\"></el-input>\n          </el-form-item>\n          <el-button type=\"primary\" @click=\"update\" style=\"margin-left: 45%\">保存</el-button>\n        </el-form>\n      </el-card>\n    </el-col>\n    <el-col :span=\"8\">\n      <el-card>\n        <el-form ref=\"form1\" :rules=\"rules\" :model=\"form1\">\n          <el-form-item label=\"原密码\" prop=\"password\">\n            <el-input type=\"password\" v-model=\"form1.password\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"新密码\" prop=\"newpassword\">\n            <el-input type=\"password\" v-model=\"form1.newpassword\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"确认密码\" prop=\"conpassword\">\n            <el-input type=\"password\" v-model=\"form1.conpassword\"></el-input>\n          </el-form-item>\n          <el-button type=\"primary\" @click=\"edit\" style=\"margin-left: 30%\">确认修改</el-button>\n          <el-button @click=\"reset('form1')\">清空</el-button>\n        </el-form>\n      </el-card>\n    </el-col>\n  </el-row>\n\n</div>\n</template>\n\n<script>\nimport {default as api} from \"@/utils/api\";\n\nexport default {\n  name: \"userInfo\",\n  data() {\n    let validateChange = (rule,value,callback)=>{\n      if(value!==''){\n        if(value===this.form1.password){\n          callback(new Error('新密码不能与原密码一致'))\n          return false\n        }\n        else {\n          callback()\n        }\n      }\n    }\n    let validatePassword = (rule,value,callback)=>{\n      if(value!==''){\n        if(value!==this.form1.newpassword){\n          callback(new Error('两次输入密码不一致'))\n          return false\n        }\n        else {\n          callback()\n        }\n      }\n    }\n    return{\n      form: {\n        name: '',\n        sex: '',\n        phone: '',\n        id: '',\n        email: '',\n        department: '',\n        account: ''\n      },\n      form1:{\n        password:'',\n        newpassword:'',\n        conpassword:''\n      },\n      rules: {\n        newpassword: [\n          {\n            required: true,\n            message: '密码不能为空',\n            trigger: 'blur'\n          },\n          {\n            min: 6,\n            max: 20,\n            message: '长度在 6 个字符以上',\n            trigger: 'blur'\n          },\n          {\n            validator: validateChange,\n            trigger: 'blur'\n          }\n        ],\n        conpassword: [\n          {\n            required: true,\n            message: '请输入确认密码',\n            trigger: 'blur'\n          },\n          {\n            min: 6,\n            max: 20,\n            message: '长度在 6 个字符以上',\n            trigger: 'blur'\n          },\n          {\n            validator: validatePassword,\n            trigger: 'blur'\n          }\n        ]\n      }\n    }\n  },\n  created() {\n    this.getUserInfo()\n  },\n  methods:{\n    getUserInfo(){\n\n    },\n    update(){\n      var _this = this;\n      api({\n        url: \"/user/userUpdate\",\n        method: \"post\",\n        data:{\n          username:this.$store.getters.getUser.name,\n          phone:_this.form.phone\n        }\n      }).then(data => {\n            if(data.data.datas==='用户名不存在或者密码错误！'){\n              this.$message({\n                type:\"error\",\n                message:'错误！'\n              })\n            }else {\n              console.log(data);\n              this.$message({\n                type: 'success',\n                message: '信息修改成功'\n              });\n              // location.reload();\n            }\n    }).catch(err => {\n        console.log(err);\n      })\n    },\n\n    edit () {\n      this.$confirm('是否确定修改密码?', '提示', {\n        confirmButtonText: '确定修改',\n        cancelButtonText: '放弃修改',\n        type: 'warning'\n      }).then(() => {\n\n        var _this = this;\n        api({\n          url: \"/user/userChangePassword\",\n          method: \"post\",\n          data:{\n            username:this.$store.getters.getUser.name,\n            originalPassword:_this.form1.password,\n            password: _this.form1.newpassword\n          }\n        }).then(data => {\n          if(data.data.datas==='用户名不存在或者密码错误！'){\n            this.$message({\n              type:\"error\",\n              message:'原密码错误！'\n            })\n          }else {\n            console.log(data);\n            this.$message({\n              type: 'success',\n              message: '密码修改成功'\n            });\n            // location.reload();\n          }\n        }).catch(err => {\n          console.log(err);\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已放弃修改'\n        });\n      })\n\n    },\n    reset(formName){\n      this.$refs[formName].resetFields();\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-icon-s-home{\n  font-size: 200%;\n}\n.el-breadcrumb1{\n  font-size: 15px;\n  margin-top: 10px;\n}\n.el-row1{\n  margin-top: 30px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);\n  border-radius: 4px;\n  text-align: center;\n  height: 50px;\n  line-height: 50px;\n  font-weight: bold;\n  font-family: 黑体;\n  font-size: 25px;\n}\n.el-card{\n  margin-top: 30px;\n  border-radius: 8px;\n}\n</style>\n"]}]}